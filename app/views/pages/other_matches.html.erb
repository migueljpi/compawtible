<div class="header-top">
  <h1>Here are some other matches for you.</h1>
</div>

<h1>
  <%= link_to search_path(prompt_id: @prompt.id), data: { turbo: false } do %>
    <i class="fa-solid fa-arrow-left"></i>
  <% end %>
</h1>


  <div class="row mt-2 d-flex">
    <% if @best_matches.present? %>
      <% @best_matches.each_with_index do |pet, index| %>
        <div class="col-md-3 other-pets-card-container">
          <div class="pet-image-modal">
            <div class="animal-images">
             <div class="image-container" id="favorite_icon_<%= pet.id %>">
                <% if current_user.favorited?(pet) %>
                  <% favorite = current_user.favorites.find_by(favoritable: pet) %>
                  <%= button_to user_pet_favorite_path(current_user, pet, favorite), method: :delete, data: { turbo: true }, class: "favorite-button" do %>
                    <i class="fa-solid fa-heart"></i>
                  <% end %>
                <% else %>
                  <%= button_to user_pet_favorites_path(current_user, pet), method: :post, data: { turbo: true }, class: "favorite-button" do %>
                    <i class="fa-regular fa-heart"></i>
                  <% end %>
                <% end %>
              </div>
                <% if pet.photos.attached? %>
                <div id="carouselExampleControls_<%= index %>" class="carousel slide">
                  <div class="carousel-inner">
                    <% pet.photos.each_with_index do |photo, idx| %>
                      <div class="carousel-item <%= 'active' if idx == 0 %>">
                        <% if photo.present? %>
                          <%= image_tag(photo, class: "square-image") %>
                        <% else %>
                          <%= image_tag('dog.jpg', class: "square-image") %>
                        <% end %>
                      </div>
                    <% end %>
                  </div>
                  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls_<%= index %>" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                  </button>
                  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls_<%= index %>" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                  </button>
                </div>
              <% end %>
              <div class="animal-info">
                <div class="pet-name-modal-card">
                  <p><strong><%= pet.name %></strong></p>
                </div>
                <div class="pet-description-modal-card">
                  <p><%= pet.description %></p>
                </div>
                <div class="pet-card-modal-button d-flex justify-content-end">
                  <%= link_to "View Pet", user_pet_path(pet.provider, pet), class: "btn btn-primary", data: { turbo: false } %>
                </div>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    <% else %>
      <p>This is where your matches will show up</p>
    <% end %>
  </div>
